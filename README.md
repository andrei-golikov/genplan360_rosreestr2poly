# –ì–µ–Ω–ø–ª–∞–Ω360 ‚Äî Rosreestr Pipeline (starter pack)

–ù–∞–±–æ—Ä —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç **–±—ã—Å—Ç—Ä–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å** —á–∞—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞,
—Å–≤—è–∑–∞–Ω–Ω—É—é —Å –ø–æ–ª—É—á–µ–Ω–∏–µ–º —É—á–∞—Å—Ç–∫–æ–≤ –∏–∑ –†–æ—Å—Ä–µ–µ—Å—Ç—Ä–∞ –∏ –∏—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π
–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ krpano / –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≥–µ–Ω–ø–ª–∞–Ω.

## üéØ –¶–µ–ª–∏

- –ï–¥–∏–Ω—ã–π, –ø–æ–Ω—è—Ç–Ω—ã–π **–ø–ª–µ–π–±—É–∫**: –æ—Ç –≤—ã–≥—Ä—É–∑–∫–∏ —É—á–∞—Å—Ç–∫–æ–≤ ‚Üí –¥–æ `polygon.json` –∏ XML hotspot‚Äô–æ–≤.
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —à–ø–∞—Ä–≥–∞–ª–∫–∏ ‚Äî —á—Ç–æ–±—ã **—á–µ—Ä–µ–∑ –ø–æ–ª–≥–æ–¥–∞** –Ω–µ –≤—Å–ø–æ–º–∏–Ω–∞—Ç—å ¬´—á—Ç–æ –∑–∞ —Å–∫—Ä–∏–ø—Ç –∏ –≥–¥–µ –æ–Ω –±—ã–ª¬ª.
- –ì–æ—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã (`Makefile`) –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ–≥–æ –∑–∞–ø—É—Å–∫–∞.

---

## üì¶ –°–æ—Å—Ç–∞–≤

- `docs/rosreestr_pipeline.md` ‚Äî –ø–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –†–æ—Å—Ä–µ–µ—Å—Ç—Ä–æ–º (CLI, —Ñ–∏–ª—å—Ç—Ä—ã, –ø–∞–π–ø–ª–∞–π–Ω).
- `docs/repo_structure.md` ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.
- `scripts/rosreestr_cli_cheatsheet.md` ‚Äî –∫–æ—Ä–æ—Ç–∫–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ `rosreestr2coord`.
- `Makefile` ‚Äî —É–¥–æ–±–Ω—ã–µ —Ü–µ–ª–∏: `fetch`, `visualize`, `pipeline`, `manual-adjust`, `hotspots`, `xml-normalize`, `xml-rename`.
- `examples/polygon_sample.json` ‚Äî –ø—Ä–∏–º–µ—Ä —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ JSON —Å —É—á–∞—Å—Ç–∫–∞–º–∏.

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: —Å–∞–º–∏ —Ä–∞–±–æ—á–∏–µ —Å–∫—Ä–∏–ø—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `get2Dplot_good.py`, `get_pic_and_hotspots_result_json_complete.py`)
—É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ ‚Äî –∑–¥–µ—Å—å –º—ã –¥–∞—ë–º **–æ–±–≤—è–∑–∫—É, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã**.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1) –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
python -m venv .venv && . .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -U pip
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å Python-—Å–∫—Ä–∏–ø—Ç—ã –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏:
pip install matplotlib shapely pyproj
# –î–ª—è Rosreestr CLI:
# https://github.com/kolypto/rosreestr2coord (–∏–ª–∏ —Ç–≤–æ–π —Ñ–æ—Ä–∫/–∑–µ—Ä–∫–∞–ª–æ)
```

2) –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `rosreestr2coord` –≤–∏–¥–µ–Ω –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:
```bash
rosreestr2coord --help
```

3) –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `Makefile` –ø–æ–¥ —Å–≤–æ–π –∫–µ–π—Å: `CAD_NUM`, `OUTDIR`, `HEIGHT`, –ø—É—Ç–∏ –∫ —Å–∫—Ä–∏–ø—Ç–∞–º.

4) –ó–∞–ø—É—Å—Ç–∏ –ø–∞–π–ø–ª–∞–π–Ω (–ø—Ä–∏–º–µ—Ä):
```bash
make fetch            # –≤—ã–≥—Ä—É–∑–∫–∞ .geojson
make visualize        # –±—ã—Å—Ç—Ä–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ —Å –ø–æ–ª–∏–≥–æ–Ω–∞–º–∏
make pipeline         # —á–µ—Ä–Ω–æ–≤–æ–π polygon.json -> –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ 4 —Ç–æ—á–∫–∞–º–∏ -> —Ñ–∏–Ω–∞–ª—å–Ω—ã–π polygon.json
make manual-adjust    # –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–¥–∫—Ä—É—Ç–∏—Ç—å –º–∞—Å—à—Ç–∞–±/—Å–º–µ—â–µ–Ω–∏—è/—É–≥–æ–ª
make hotspots         # —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å XML hotspot‚Äô—ã –∏ result.json
```

---

## üìÅ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

–°–º–æ—Ç—Ä–∏ `docs/repo_structure.md`, –∫—Ä–∞—Ç–∫–æ:

```
genplan360/
  data/geojson/                 # –≤—ã–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –∏–∑ –†–æ—Å—Ä–µ–µ—Å—Ç—Ä–∞
  data/outputs/                 # –∫–∞—Ä—Ç–∏–Ω–∫–∏, –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ JSON
  krpano/                       # hs01.xml, hs02.xml, actions.xml, tour.xml
  tools/                        # —Ç–≤–æ–∏ Python-—Å–∫—Ä–∏–ø—Ç—ã (–∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞)
  docs/                         # –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
  Makefile
  README.md
```

---

## üîß –°–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ (–∫—Ä–∞—Ç–∫–æ)

| –°–∫—Ä–∏–ø—Ç                                 | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|----------------------------------------|------------|
| `kad_coord.py`                         | –í—ã–≥—Ä—É–∑–∫–∞ —É—á–∞—Å—Ç–∫–æ–≤ –∏–∑ –†–æ—Å—Ä–µ–µ—Å—Ç—Ä–∞ (—á–µ—Ä–µ–∑ `rosreestr2coord`) –≤ `.geojson` |
| `get_pic.py`                           | –ë—ã—Å—Ç—Ä–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è geojson ‚Üí `output.png` |
| `get2Dplot_good.py`                    | –î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω: —á–µ—Ä–Ω–æ–≤–æ–π `polygon.json` + —Ä—É—á–Ω–∞—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ 4 –∫–≤–∞–¥—Ä–∞—Ç–∞–º |
| `manual_adjust_polygon_good_twistedaxis.py` | –†—É—á–Ω–∞—è –ø–æ–¥—Å—Ç—Ä–æ–π–∫–∞ `polygon.json` (–º–∞—Å—à—Ç–∞–±, —Å–º–µ—â–µ–Ω–∏–µ, —É–≥–æ–ª) |
| `get_pic_and_hotspots_result_json_complete.py` | –ü–æ–ª–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä: geojson ‚Üí hotspot XML + `result.json` |
| `round_polygon_coordinates_digit_groups.py` | –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è ¬´—à—É–º–∏–ª–∫–∞/–æ–∫—Ä—É–≥–ª—è–ª–∫–∞¬ª –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ `polygon.json` |
| `normalize_hotspot_names.py`           | –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∏–º—ë–Ω hotspot‚Äô–æ–≤ –∫ —Ñ–æ—Ä–º–∞—Ç—É `hs00001` |
| `rename_hotspots.py`                   | –ú–∞—Å—Å–æ–≤–æ–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ hotspot‚Äô–æ–≤ –ø–æ —Å–ª–æ–≤–∞—Ä—é –∑–∞–º–µ–Ω |

–ü–æ–ª–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã ‚Äî –≤ `docs/rosreestr_pipeline.md`.